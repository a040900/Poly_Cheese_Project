# CheeseDog Phase 3 Step 13: Model Calibration Session Backup (2026-02-19)

## 🎯 目標 (Objective)
- 對 Polymarket BTC 15m 交易策略進行真實市場數據回測與參數校正。
- 數據來源: /data/marketprice_(1).db (2026-02-16 14:01 ~ 2026-02-19 05:05 UTC+8)
- 數據量: 3 天，25823 筆記錄 (10s Tick Data -> Resampled to 1m Candles)

## 📊 校正結果 (Calibration Results)
- **總回報 (PnL)**: **+19.11%** (Initial $1000 -> $1191)
- **交易次數**: 89 (平均每天 ~30 筆)
- **勝率 (Win Rate)**: 48.3% (PnL Ratio > 1)
- **策略風格**: 高波動適應型 (High Momentum + Mean Reversion)

## 🛠️ 主要代碼變更 (Key Changes)
### 1. `backend/app/config.py` (BIAS_WEIGHTS Updated)
- **MACD**: 3 -> **10** (大幅提升動能指標權重)
- **RSI**: 5 -> **8** (提升超買超賣敏感度)
- **EMA**: 6 -> **5** (稍微降低趨勢跟隨滯後)

### 2. 新增工具 `backend/scripts/calibrate_model.py`
- 用於未來定期校正模型參數。
- 支援 SQLite 資料庫讀取、Resample、Grid Search。
- 自動處理 Column Name 變體 (pm_up_price vs up_price)。

### 3. API 優化
- 新增 `/api/cro/compact` 端點，減少 AI Agent 輪詢時的 Token 消耗 (~78% reduction)。

## 📝 關鍵日誌 (Key Logs)
- 校正過程成功識別最佳參數組合 (`rsi=8, ema=5, macd=10`)。
- 解決了 `marketprice_(1).db` 中 Column Name 不一致與 Schema 混亂問題。
- 修復了後端啟動時 Port 8888 被佔用的問題 (PID 21700)。

## 🚀 下一步 (Next Steps)
1. 持續監控實盤表現，驗證新參數效果。
2. 定期運行 `calibrate_model.py` 進行動態參數調整。
3. 部署至 VPS 環境。

---
*Auto-generated by Antigravity Assistant*
